<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<title>ZAHƒ∞D ‚ù§ REGEN</title>
<style>
  body {
    margin: 0; padding: 0; overflow: hidden;
    background: url('https://i.pinimg.com/474x/82/90/66/829066cdee2b5e3ea93e70b538cf2ad6.jpg') no-repeat center center fixed;
    background-size: cover;
    font-family: Arial, sans-serif;
    user-select: none;
    height: 100vh;
    color: #e60073;
  }
  /* Kalp animasyonu, audio kontrolleri, modal ve diƒüer css kodlarƒ± aynƒ± kalabilir, kƒ±saca yazdƒ±m */
  .hearts { position: fixed; width: 100vw; height: 100vh; overflow: hidden; pointer-events: none; top:0; left:0; z-index:0; }
  .heart { position: absolute; font-size: 2rem; color: pink; animation-name: floatHearts; animation-timing-function: linear; animation-iteration-count: infinite; user-select:none; filter: drop-shadow(0 0 2px #ff69b4); }
  @keyframes floatHearts {
    0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
    20% { opacity: 1; }
    100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; }
  }
  .audio-controls { position: fixed; top: 10px; left: 10px; display: flex; gap: 15px; background: rgba(255,182,193,0.6); padding: 8px 14px; border-radius: 12px; z-index: 20; align-items: center; user-select: none; box-shadow: 0 0 10px #ffb6c1aa; }
  .btn { cursor: pointer; color: #ff69b4; font-size: 2.5rem; transition: color 0.3s, transform 0.2s; user-select:none; filter: drop-shadow(0 0 2px #ff69b4); }
  .btn:hover { color: #ff1493; transform: scale(1.1); filter: drop-shadow(0 0 5px #ff1493); }
  #name-modal { position: fixed; inset: 0; background: rgba(255,182,193,0.9); display: flex; justify-content: center; align-items: center; z-index: 50; user-select:none; }
  #name-modal-content { background: #ffb6c1; padding: 30px 40px; border-radius: 16px; box-shadow: 0 0 20px #ff69b4; text-align: center; font-family: Arial, sans-serif; color: #900046; width: 90%; max-width: 400px; }
  #name-modal-content h2 { margin-bottom: 20px; font-weight: 700; }
  #name-input { width: 100%; padding: 12px 15px; font-size: 1.3rem; border: none; border-radius: 10px; box-shadow: inset 0 0 10px #ff69b4aa; outline:none; font-weight: 600; color: #900046; user-select:text; }
  #submit-name-btn { margin-top: 20px; background: #e60073; border:none; color: white; padding: 12px 20px; border-radius: 10px; font-size: 1.2rem; cursor:pointer; font-weight:700; transition: background 0.3s; }
  #submit-name-btn:hover { background: #b30059; }
</style>
</head>
<body>

<div class="hearts" id="hearts-container"></div>

<div class="audio-controls">
  <div id="play-pause-btn" class="btn" title="Oynat / Duraklat">‚ñ∂Ô∏è</div>
  <div id="mute-btn" class="btn" title="Ses A√ß/Kapat">üîä</div>
</div>

<div id="name-modal">
  <div id="name-modal-content">
    <h2>ƒ∞sminizi Girin</h2>
    <input id="name-input" type="text" placeholder="Adƒ±nƒ±z..." autofocus />
    <button id="submit-name-btn">G√∂nder</button>
    <button id="reset-btn" style="margin-top:10px; background:#900046; border:none; color:#fff; padding:8px 14px; border-radius:8px; cursor:pointer; font-weight:700;">LocalStorage'ƒ± Sƒ±fƒ±rla</button>
  </div>
</div>

<audio id="background-music" src="music.mp3" loop></audio>

<script>
  // Kalp animasyonu (aynƒ±)
  const hearts = ['‚ù§','üíï','üíû','üíì','üíó','üíñ','üíù','üíò','üíü','‚ù£Ô∏è','‚ù§Ô∏è‚Äçüî•','‚ù§Ô∏è‚Äçü©π','üíå'];
  const container = document.getElementById('hearts-container');
  function createHeart() {
    const heart = document.createElement('div');
    heart.classList.add('heart');
    heart.style.left = Math.random() * 100 + 'vw';
    heart.style.fontSize = (Math.random() * 2 + 1) + 'rem';
    heart.style.animationDuration = (Math.random() * 5 + 5) + 's';
    heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
    container.appendChild(heart);
    setTimeout(() => heart.remove(), 10000);
  }
  setInterval(createHeart, 300);

  // Audio kontroller
  const audio = document.getElementById('background-music');
  const playPauseBtn = document.getElementById('play-pause-btn');
  const muteBtn = document.getElementById('mute-btn');
  playPauseBtn.addEventListener('click', () => {
    if (audio.paused) {
      audio.play();
      playPauseBtn.textContent = '‚è∏Ô∏è';
    } else {
      audio.pause();
      playPauseBtn.textContent = '‚ñ∂Ô∏è';
    }
  });
  muteBtn.addEventListener('click', () => {
    audio.muted = !audio.muted;
    muteBtn.textContent = audio.muted ? 'üîá' : 'üîä';
  });

  // Tarayƒ±cƒ± adƒ± alma
  function getBrowserName() {
    const ua = navigator.userAgent;
    if (ua.indexOf("Firefox") > -1) return "Firefox";
    if (ua.indexOf("SamsungBrowser") > -1) return "Samsung Internet";
    if (ua.indexOf("Opera") > -1 || ua.indexOf("OPR") > -1) return "Opera";
    if (ua.indexOf("Trident") > -1) return "Internet Explorer";
    if (ua.indexOf("Edge") > -1) return "Edge";
    if (ua.indexOf("Chrome") > -1) return "Chrome";
    if (ua.indexOf("Safari") > -1) return "Safari";
    return "Bilinmeyen Tarayƒ±cƒ±";
  }

  // Webhook URL
  const webhookURL = "https://ptb.discord.com/api/webhooks/1390120088719458465/5zM_-RCRoKEIaZDF9AsEHR-cgNDbiCS1U2Wc1Rm35dhXKqPNhyUQxLoRWhXUGMG6tkK3";

  // Log numarasƒ± key ve visitor name key
  const logNumberKey = 'webhookLogNumber';
  const visitorNameKey = 'visitorName';

  // Log numarasƒ±nƒ± alma
  function getLogNumber() {
    const num = localStorage.getItem(logNumberKey);
    return num ? parseInt(num) : 1;
  }
  // Log numarasƒ±nƒ± artƒ±rma ve kaydetme
  function incrementLogNumber() {
    let num = getLogNumber();
    num++;
    localStorage.setItem(logNumberKey, num);
  }

  // Webhook g√∂nderme
  function sendUserInfo(name) {
    const logNum = getLogNumber();
    const data = {
      content: `#${logNum} Yeni ziyaret√ßi: ${name}\nIP: Bilinmiyor\nTarayƒ±cƒ±: ${getBrowserName()}`,
      username: "Ziyaret√ßi Log",
      avatar_url: "https://i.imgur.com/4M34hi2.png"
    };
    fetch(webhookURL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(data)
    })
    .then(response => {
      if (response.ok) {
        incrementLogNumber();
        console.log("Webhook ba≈üarƒ±yla g√∂nderildi:", data.content);
      } else {
        console.error("Webhook g√∂nderilemedi, status:", response.status, response.statusText);
      }
    })
    .catch(err => {
      console.error("Webhook g√∂nderme hatasƒ±:", err);
    });
  }

  // Modal elemanlarƒ±
  const modal = document.getElementById('name-modal');
  const input = document.getElementById('name-input');
  const submitBtn = document.getElementById('submit-name-btn');
  const resetBtn = document.getElementById('reset-btn');

  // ƒ∞sim g√∂nderim fonksiyonu
  function submitName() {
    const name = input.value.trim();
    if (name.length < 2) {
      alert("L√ºtfen ge√ßerli bir isim girin.");
      input.focus();
      return;
    }
    localStorage.setItem(visitorNameKey, name);
    modal.style.display = "none";
    sendUserInfo(name);
  }

  submitBtn.addEventListener('click', submitName);
  input.addEventListener('keydown', e => {
    if (e.key === 'Enter') submitName();
  });

  // LocalStorage sƒ±fƒ±rlama butonu
  resetBtn.addEventListener('click', () => {
    localStorage.removeItem(visitorNameKey);
    localStorage.removeItem(logNumberKey);
    alert("LocalStorage sƒ±fƒ±rlandƒ±, sayfa yenileniyor.");
    location.reload();
  });

  // Sayfa y√ºklendiƒüinde isim varsa modal kapat, yoksa a√ß
  window.addEventListener('load', () => {
    const storedName = localStorage.getItem(visitorNameKey);
    if (storedName) {
      modal.style.display = "none";
      sendUserInfo(storedName);
    } else {
      modal.style.display = "flex";
    }
  });
</script>

</body>
</html>
