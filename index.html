<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Discord Profilim</title>
  <style>
    body {
      background: #2c2f33;
      color: white;
      font-family: Arial, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }
    .card {
      background: #23272a;
      border-radius: 15px;
      padding: 20px;
      width: 320px;
      text-align: center;
      box-shadow: 0 0 20px rgba(0,0,0,0.5);
    }
    .avatar {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      margin-bottom: 15px;
      border: 3px solid #7289da;
    }
    .username {
      font-size: 20px;
      font-weight: bold;
      margin-bottom: 5px;
    }
    .status-msg {
      font-size: 14px;
      color: #b9bbbe;
      margin-bottom: 15px;
    }
    .activity {
      background: #2c2f33;
      padding: 10px;
      border-radius: 8px;
      font-size: 14px;
      margin-top: 10px;
    }
    img.cover {
      border-radius: 8px;
      margin-top: 10px;
      width: 100%;
    }
  </style>
</head>
<body>

  <div class="card">
    <img id="avatar" class="avatar" src="" alt="Avatar">
    <div id="username" class="username">YÃ¼kleniyor...</div>
    <div id="statusMsg" class="status-msg"></div>
    <div id="activity" class="activity">Aktivite bilgisi yÃ¼kleniyor...</div>
    <img id="cover" class="cover" style="display:none;">
  </div>

  <script>
    const userId = "461158648526143490"; // Discord ID'n buraya

    const ws = new WebSocket("wss://api.lanyard.rest/socket");
    ws.onopen = () => {
      ws.send(JSON.stringify({
        op: 2,
        d: { subscribe_to_id: userId }
      }));
    };

    ws.onmessage = (event) => {
      const data = JSON.parse(event.data);
      if (data.t === "INIT_STATE" || data.t === "PRESENCE_UPDATE") {
        const d = data.d;

        // Profil fotoÄŸrafÄ±
        document.getElementById("avatar").src = `https://cdn.discordapp.com/avatars/${userId}/${d.discord_user.avatar}.png?size=512`;

        // KullanÄ±cÄ± adÄ± (sadece isim, #tag yok)
        document.getElementById("username").innerText = d.discord_user.username;

        // Durum mesajÄ± (custom status)
        if (d.activities) {
          const customStatus = d.activities.find(a => a.type === 4); // 4 = custom status
          document.getElementById("statusMsg").innerText = customStatus && customStatus.state ? customStatus.state : "";
        }

        // Aktivite bilgisi
        let activityText = "Åžu anda aktif deÄŸil.";
        let coverImg = document.getElementById("cover");

        if (d.listening_to_spotify) {
          activityText = `ðŸŽµ ${d.spotify.artist} - ${d.spotify.song}`;
          coverImg.src = d.spotify.album_art_url;
          coverImg.style.display = "block";
        } else {
          const game = d.activities.find(a => a.type === 0); // 0 = Oyun
          if (game) {
            activityText = `ðŸŽ® ${game.name}`;
            coverImg.style.display = "none";
          } else {
            coverImg.style.display = "none";
          }
        }

        document.getElementById("activity").innerText = activityText;
      }
    };
  </script>

</body>
</html>