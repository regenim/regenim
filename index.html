<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Discord Aktivitem</title>
  <style>
    body {
      background: #2c2f33;
      color: white;
      font-family: Arial, sans-serif;
      text-align: center;
      padding-top: 50px;
    }
    .card {
      background: #23272a;
      border-radius: 10px;
      padding: 20px;
      width: 300px;
      margin: auto;
    }
    img {
      border-radius: 10px;
      max-width: 100%;
    }
  </style>
</head>
<body>

  <div class="card">
    <h2>Åžu anki Aktivitem</h2>
    <p id="status">YÃ¼kleniyor...</p>
    <img id="cover" style="display:none;">
  </div>

  <script>
    const userId = "461158648526143490"; // Discord ID'ni buraya yaz
    const ws = new WebSocket(`wss://api.lanyard.rest/socket`);

    ws.onopen = () => {
      ws.send(JSON.stringify({
        op: 2,
        d: { subscribe_to_id: userId }
      }));
    };

    ws.onmessage = (event) => {
      const data = JSON.parse(event.data);
      if (data.t === "INIT_STATE" || data.t === "PRESENCE_UPDATE") {
        const presence = data.d;
        let statusText = "Åžu anda boÅŸta...";
        let coverImg = document.getElementById("cover");

        if (presence.listening_to_spotify) {
          const song = presence.spotify.song;
          const artist = presence.spotify.artist;
          const albumArt = presence.spotify.album_art_url;
          statusText = `ðŸŽµ ${artist} - ${song}`;
          coverImg.src = albumArt;
          coverImg.style.display = "block";
        } else if (presence.activities && presence.activities.length > 0) {
          const game = presence.activities.find(a => a.type === 0); // 0 = oynanan oyun
          if (game) {
            statusText = `ðŸŽ® ${game.name}`;
            coverImg.style.display = "none";
          }
        } else {
          coverImg.style.display = "none";
        }

        document.getElementById("status").innerText = statusText;
      }
    };
  </script>

</body>
</html>